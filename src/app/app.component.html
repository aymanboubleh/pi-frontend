<nav class="navbar navbar-expand-sm bg-dark navbar-dark w-100">

  <!-- Brand -->
  <a class="navbar-brand" href="#">üêÄ</a>

  <!-- Links -->
  <ul class="navbar-nav w-100">
    <li class="nav-item">
      <a class="nav-link" href="#">Floyd</a>
    </li>
    <ng-container *ngIf="authService.isLoggedIn()">

      <!-- Dropdown -->
      <ng-container *ngIf="authService.isAdmin">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown">
            Filiere
          </a>
          <div class="dropdown-menu">
            <a class="dropdown-item" routerLink="/admin/filieres">Liste</a>
            <a class="dropdown-item" routerLink="/admin/filieres/create"
            >Nouvelle</a
            >
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown">
            Session
          </a>
          <div class="dropdown-menu">
            <a class="dropdown-item" routerLink="/admin/sessions">Liste</a>
            <a class="dropdown-item" routerLink="/admin/sessions/create"
            >Nouvelle</a
            >
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown">
            Elements
          </a>
          <div class="dropdown-menu">
            <a class="dropdown-item" routerLink="/admin/elements">Liste</a>
            <a class="dropdown-item" href="#">Nouvelle</a>
          </div>
        </li>

        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown">
            Demandes
          </a>
          <div class="dropdown-menu">
            <a class="dropdown-item" routerLink="/admin/demandeReleves">Relev√©s</a>
            <a class="dropdown-item" routerLink="/admin/demandes">Attestations</a>
          </div>
        </li>
      </ng-container>
      <ng-container *ngIf="authService.isStudent">
        <li class="nav-item">
          <a class="nav-link" routerLink="/etudiant/sessions">Mes sessions</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown">
            Mes demandes
            <span *ngIf="etudiantService.existDemandeNotSeen"
                  class="badge badge-danger">{{(etudiantService.demandeAttestationCount.valueOf() + etudiantService.demandeReleveCount.valueOf())}}</span>
          </a>
          <div class="dropdown-menu">
            <button class="dropdown-item"
                    (click)="etudiantService.showAttestationModal = !etudiantService.showAttestationModal">Attestations
              <span class="badge badge-dark" *ngIf="etudiantService.demandeAttestationCount > 0"
              >{{ etudiantService.demandeAttestationCount}}</span></button>
            <button (click)="etudiantService.showRelevesModal = !etudiantService.showRelevesModal"
                    class="dropdown-item">Relev√©s
              <span *ngIf="etudiantService.demandeReleveCount > 0"
                    class="badge badge-dark">{{etudiantService.demandeReleveCount}} </span></button>
          </div>
        </li>
      </ng-container>
      <ng-container>

        <li class="nav-item">
          <a class="nav-link" routerLink="/admin/bookings">Bookings</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/admin/rooms">Rooms</a>
        </li>
      </ng-container>

      <li class="nav-item w-100">
        <div class="dropdown float-right">
          <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown">
            {{authService.isAdmin ? 'Admin' : (authService.isStudent ? authService.user.nom.toUpperCase() :
            'Prof')}}
          </a>
          <div class="dropdown-menu">
            <button class="dropdown-item" (click)="authService.logout()">Logout</button>
            <a class="dropdown-item" href="#">Profile</a>
          </div>
        </div>
      </li>
    </ng-container>
    <ng-container *ngIf="!(authService.loggedIn.getValue())">
      <li class="nav-item w-100">
        <a class="nav-link float-right" routerLink="/login">Login</a>
      </li>
    </ng-container>
  </ul>
</nav>
<div class="container-fluid">
  <router-outlet></router-outlet>
</div>
<div class="toast" role="alert" aria-live="assertive" aria-atomic="true">
  <div class="toast-header">
    <span class="glyphicon glyphicon-info-sign"></span>
    <strong class="mr-auto" id="toast-object"></strong>
    <!--    <small>11 mins ago</small>-->
    <button
      type="button"
      class="ml-2 mb-1 close"
      data-dismiss="toast"
      aria-label="Close"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="toast-body">
    <p id="toast-message"></p>
  </div>
</div>
<!--<div  aria-live="polite" aria-atomic="true" style="position: relative; min-height: 200px;">-->
<div id="toasts-div" style="position: fixed; top: 0; right: 5px;"></div>
<!--</div>-->
<!--ENSET IMAGE-->
<img src="assets/enset-logo-monochrome.png" alt="enset-logo-monochrome"
     style="max-width: 200px;max-height: 50px;position:absolute;bottom: 0;left:50%;z-index: -5;
     opacity: 0.1;transform:
     translate(-50%,0)">

<div class="modal fade attestationsModal"  tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLongTitle"
     aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
            <span *ngIf="etudiantService.showRelevesModal">Mes demandes de relev√©s</span>
            <span *ngIf="etudiantService.showAttestationModal">Mes demandes</span>
        </h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <demandes-attestation *ngIf="etudiantService.showAttestationModal"></demandes-attestation>
        <app-demande-releves *ngIf="etudiantService.showRelevesModal"></app-demande-releves>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal"
          >Close
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

