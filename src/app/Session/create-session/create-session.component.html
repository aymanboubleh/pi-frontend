<div class="container mt-4">
  <div class="row">
    <div class="col-sm-8 offset-sm-2">

      <div class="card">
        <div class="card-header">
          Ajout de session
        </div>
        <div class="card-body" *ngIf="filieresList?.length > 0">
          <form #addsession="ngForm" (ngSubmit)="onSubmit(addsession.value,addedStudents.selectedOptions.selected)">
            <div class="form-group">
              <label>Filiere</label>
              <select name="filiere" id="select-filiere" class="form-control" [(ngModel)]="toCreateSession.filiere.id"
                      (change)="onFiliereSelectChange($event)">
                <option *ngFor="let filiere of filieresList" [value]="filiere.id">{{filiere.libelle}}</option>
              </select>
            </div>
            <div class="form-group">
              <label>Annee</label>
              <input type="number" max="2030" min="2000" name="annee" [(ngModel)]="toCreateSession.annee" ngModel
                     class="form-control">
            </div>
            <div class="form-group">
              <div class="row">
                <div class="col-10">
                  Etudiants
                  <input class="form-control" type="text" name="searchCin" [(ngModel)]="searchCin" ngModel>
                </div>
                <div class="col-2">
                  <button type="button" (click)="onSearchCin($event)" class="btn btn-primary">
                    <mat-icon aria-hidden="false" aria-label="Search icon">
                      search
                    </mat-icon>
                  </button>

                </div>
              </div>
            </div>

            <fieldset class="border p-3">
              <legend>Etudiants</legend>
              <div>

                <mat-selection-list #addedStudents
                                    (selectionChange)="studentSelectionChange(addedStudents.selectedOptions.selected)"
                >
                  <mat-list-option *ngFor="let student of currentStudents" selected (change)="onChangeStudent($event)"
                                   [value]="student"
                  >
                    {{student.nom}} {{student.prenom}}
                  </mat-list-option>
                </mat-selection-list>

                <p>
                  Students selected: {{addedStudents.selectedOptions.selected.length}}
                </p>

              </div>
            </fieldset>
            <hr>
            <button type="submit" class="btn btn-primary">Submit</button>
          </form>
        </div>
        <div class="card-body" *ngIf="!filieresList || filieresList.length == 0">
          La liste des filieres est vide.
        </div>
      </div>

    </div>
  </div>
</div>
